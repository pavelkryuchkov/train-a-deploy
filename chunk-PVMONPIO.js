import{a as H}from"./chunk-LGNUFN6P.js";import{b as T,d as m,f as V,g as q,i as I,j as N,l as $,n as A,p as B,q as R,r as j,u as G}from"./chunk-A73FDB7P.js";import{a as z}from"./chunk-YAV3XNEK.js";import{c as U,h as L}from"./chunk-4D7OLZBK.js";import"./chunk-NFDW3DZI.js";import"./chunk-4PPTANTY.js";import"./chunk-3X4PWRWX.js";import"./chunk-IP76CWZZ.js";import"./chunk-Y5E3HJHA.js";import{$b as c,Cb as D,Db as _,Fb as g,Gb as p,Hb as o,Ia as S,Ib as e,Jb as u,Lb as O,Ob as C,Qb as l,ac as M,bb as s,bc as E,cb as y,ic as P,jc as h,la as F,pa as b,vb as k,xa as f,xb as v,ya as x}from"./chunk-G6VS4OII.js";var w=()=>[];function Q(t,n){if(t&1&&(o(0,"div",3),c(1),e()),t&2){let r=n.$index,a=l().$index,i=l();s(),E(" ",r+1+a*(i.rightSeats()+i.leftSeats())+i.leftSeats()," ")}}function W(t,n){if(t&1&&(o(0,"div",2),g(1,Q,2,1,"div",3,_),e()),t&2){let r=l();s(),p(h(0,w).constructor(r.rightSeats()))}}function X(t,n){if(t&1&&(o(0,"div",3),c(1),e()),t&2){let r=n.$index,a=l().$index,i=l();s(),E(" ",r+1+a*(i.rightSeats()+i.leftSeats())," ")}}function Y(t,n){if(t&1&&(o(0,"div",2),g(1,X,2,1,"div",3,_),e()),t&2){let r=l();s(),p(h(0,w).constructor(r.leftSeats()))}}var J=(()=>{let n=class n{constructor(){this.rows=S.required(),this.rightSeats=S.required(),this.leftSeats=S.required()}};n.\u0275fac=function(i){return new(i||n)},n.\u0275cmp=b({type:n,selectors:[["app-carriage-schema"]],inputs:{rows:[1,"rows"],rightSeats:[1,"rightSeats"],leftSeats:[1,"leftSeats"]},standalone:!0,features:[P],decls:9,vars:2,consts:[[1,"carriage-schema"],[1,"seats"],[1,"row"],[1,"seat"]],template:function(i,d){i&1&&(o(0,"div",0)(1,"div",1),c(2," R "),g(3,W,3,1,"div",2,_),e(),o(5,"div",1),c(6," L "),g(7,Y,3,1,"div",2,_),e()()),i&2&&(s(3),p(h(0,w).constructor(d.rows())),s(4),p(h(1,w).constructor(d.rows())))},styles:[".carriage-schema[_ngcontent-%COMP%]{display:inline-flex;flex-direction:column;gap:32px;border:1px solid gray;border-radius:16px;margin-right:15px;padding:16px 64px 16px 48px}.carriage-schema[_ngcontent-%COMP%]   .seats[_ngcontent-%COMP%]{display:flex;gap:10px;align-items:center}.carriage-schema[_ngcontent-%COMP%]   .seats[_ngcontent-%COMP%]   .row[_ngcontent-%COMP%]{display:flex;flex-direction:column-reverse;gap:10px}.carriage-schema[_ngcontent-%COMP%]   .seats[_ngcontent-%COMP%]   .row[_ngcontent-%COMP%]   .seat[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;width:30px;height:30px;background-color:#003c7c;color:#fff;border-radius:5px}"],changeDetection:0});let t=n;return t})();var Z=(t,n)=>n.code;function ee(t,n){if(t&1){let r=O();o(0,"div",2)(1,"h2"),c(2),e(),o(3,"form",5),C("ngSubmit",function(){f(r);let i=l();return x(i.saveCarriage())}),o(4,"div",6)(5,"label",7),c(6,"Name"),e(),u(7,"input",8),e(),o(8,"div",6)(9,"label",9),c(10,"Rows"),e(),u(11,"input",10),e(),o(12,"div",6)(13,"label",11),c(14,"Left Seats"),e(),u(15,"input",12),e(),o(16,"div",6)(17,"label",13),c(18,"Right Seats"),e(),u(19,"input",14),e(),o(20,"button",15),c(21),e(),o(22,"button",16),C("click",function(){f(r);let i=l();return x(i.resetForm())}),c(23,"Cancel"),e()(),o(24,"div",17)(25,"h3"),c(26,"Carriage Prototype"),e(),u(27,"app-carriage-schema",18),e()()}if(t&2){let r=l();s(2),M(r.editingCarriageCode?"Update Carriage":"Create Carriage"),s(),v("formGroup",r.form),s(18),M(r.editingCarriageCode?"Update":"Save"),s(6),v("rows",r.rowsControl.value)("rightSeats",r.rightSeatsControl.value)("leftSeats",r.leftSeatsControl.value)}}function te(t,n){if(t&1){let r=O();o(0,"div",4)(1,"h3"),c(2),e(),o(3,"div")(4,"button",19),C("click",function(){let i=f(r).$implicit,d=l();return x(d.editCarriage(i))}),c(5,"Update"),e(),o(6,"button",20),C("click",function(){let i=f(r).$implicit,d=l();return x(d.deleteCarriage(i))}),c(7,"Delete"),e()(),u(8,"app-carriage-schema",18),e()}if(t&2){let r=n.$implicit;s(2),M(r.name),s(6),v("rows",r.rows)("rightSeats",r.rightSeats)("leftSeats",r.leftSeats)}}var xe=(()=>{let n=class n{constructor(a,i){this.fb=a,this.dialog=i,this.carriagesService=F(z),this.form=this.fb.nonNullable.group({name:["",[m.required]],rows:[2,[m.required,m.min(2)]],leftSeats:[2,[m.required,m.min(1)]],rightSeats:[3,[m.required,m.min(1)]]}),this.isEditMode=!1,this.editingCarriageCode=null}ngOnInit(){this.loadCarriages()}loadCarriages(){this.carriagesService.getCarriages().subscribe()}createCarriage(){this.isEditMode=!0,this.editingCarriageCode=null,this.form.reset({rows:2,leftSeats:10,rightSeats:10})}editCarriage(a){this.isEditMode=!0,this.editingCarriageCode=a.code,this.form.patchValue(a)}saveCarriage(){if(this.form.invalid)return;let a=this.form.value;if(this.editingCarriageCode){this.carriagesService.updateCarriage(this.editingCarriageCode,a).subscribe(()=>{this.resetForm()});return}this.carriagesService.createCarriage(a).subscribe(()=>{this.resetForm()})}resetForm(){this.isEditMode=!1,this.form.reset()}deleteCarriage(a){this.dialog.open(H,{data:{heading:"Delete carriage",content:"Are you sure you want to delete this carriage?",onDelete:()=>this.carriagesService.deleteCarriage(a.code)},width:"350px",enterAnimationDuration:0,exitAnimationDuration:0})}get nameControl(){return this.form.controls.name}get rowsControl(){return this.form.controls.rows}get rightSeatsControl(){return this.form.controls.rightSeats}get leftSeatsControl(){return this.form.controls.leftSeats}};n.\u0275fac=function(i){return new(i||n)(y(j),y(U))},n.\u0275cmp=b({type:n,selectors:[["app-carriages-page"]],standalone:!0,features:[P],decls:7,vars:1,consts:[[1,"container"],[1,"create-button",3,"click"],[1,"form-container"],[1,"carriage-list"],[1,"carriage-item"],[3,"ngSubmit","formGroup"],[1,"form-group"],["for","name"],["id","name","formControlName","name","type","text","required",""],["for","rows"],["id","rows","formControlName","rows","type","number","min","1","required",""],["for","leftSeats"],["id","leftSeats","formControlName","leftSeats","type","number","min","0","required",""],["for","rightSeats"],["id","rightSeats","formControlName","rightSeats","type","number","min","0","required",""],["type","submit",1,"submit-button"],["type","button",1,"cancel-button",3,"click"],[1,"prototype"],[3,"rows","rightSeats","leftSeats"],[1,"update-button",3,"click"],[1,"delete-button",3,"click"]],template:function(i,d){i&1&&(o(0,"div",0)(1,"button",1),C("click",function(){return d.createCarriage()}),c(2,"Create Carriage"),e(),k(3,ee,28,6,"div",2),o(4,"div",3),g(5,te,9,4,"div",4,Z),e()()),i&2&&(s(3),D(d.isEditMode?3:-1),s(2),p(d.carriagesService.carriages()))},dependencies:[G,I,T,N,V,q,R,B,$,A,L,J],styles:[".container[_ngcontent-%COMP%]{max-width:800px;margin:0 auto;padding:20px}.create-button[_ngcontent-%COMP%], .submit-button[_ngcontent-%COMP%], .cancel-button[_ngcontent-%COMP%], .update-button[_ngcontent-%COMP%], .delete-button[_ngcontent-%COMP%]{margin-left:5px;margin-bottom:20px;padding:10px 15px;border:none;border-radius:5px;cursor:pointer}.create-button[_ngcontent-%COMP%], .submit-button[_ngcontent-%COMP%], .update-button[_ngcontent-%COMP%]{background-color:#007bff;color:#fff}.create-button[_ngcontent-%COMP%]:hover, .submit-button[_ngcontent-%COMP%]:hover, .update-button[_ngcontent-%COMP%]:hover{background-color:#0056b3}.cancel-button[_ngcontent-%COMP%], .delete-button[_ngcontent-%COMP%]{background-color:#dc3545;color:#fff}.cancel-button[_ngcontent-%COMP%]:hover, .delete-button[_ngcontent-%COMP%]:hover{background-color:#c82333}.form-container[_ngcontent-%COMP%]{background-color:#f9f9f9;padding:20px;border:1px solid #ddd;border-radius:10px;margin-bottom:20px}.form-group[_ngcontent-%COMP%]{margin-bottom:15px}.form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:block;margin-bottom:5px}.form-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{box-sizing:border-box;width:100%;padding:10px;border:1px solid #ccc;border-radius:5px}.prototype[_ngcontent-%COMP%]{margin-top:10px;overflow-x:auto}.carriage-list[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:20px;margin-top:20px}.carriage-item[_ngcontent-%COMP%]{overflow-x:auto;padding:15px;border:1px solid #ccc;border-radius:10px}"],changeDetection:0});let t=n;return t})();export{xe as CarriagesPageComponent};
