import{a as j}from"./chunk-FDT3V673.js";import{b}from"./chunk-Y5E3HJHA.js";import{$ as h,Cc as l,K as p,a as m,b as g,ca as d,fa as f,ka as c,ob as a,u as r}from"./chunk-G6VS4OII.js";var v=(()=>{let s=class s{constructor(t,i){this.http=t,this.snackbar=i,this.stations=a([]),this.stationsMap=l(()=>this.stations().reduce((o,n)=>g(m({},o),{[n.id]:n}),{})),this.lat=a(0),this.lng=a(0),this.relations=a([]),this.relationsLatLngs=l(()=>{let o=this.lat(),n=this.lng();return this.relations().map(k=>{let u=this.stationsMap()[k];return[{lat:o,lng:n},{lat:u.latitude,lng:u.longitude}]})})}getStations(){return this.http.get("/api/station").pipe(d(t=>{this.stations.set(t)}))}createStation(t){return this.http.post("/api/station",t).pipe(p(i=>r({error:i})),h(()=>this.getStations()))}deleteStation(t){return this.http.delete(`/api/station/${t}`).pipe(p(i=>(this.snackbar.open(i.error.message,"close",{duration:2e3}),r({error:i}))),h(()=>this.getStations()))}};s.\u0275fac=function(i){return new(i||s)(c(b),c(j))},s.\u0275prov=f({token:s,factory:s.\u0275fac,providedIn:"root"});let e=s;return e})();export{v as a};
