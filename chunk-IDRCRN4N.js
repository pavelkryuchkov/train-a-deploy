import{i as d}from"./chunk-RB7LEZIG.js";import{$ as g,I as a,ca as f,ha as I,hb as l,kc as r,mc as u,s as n}from"./chunk-3AKBKETS.js";var c="token",m="email",k="admin@admin.com",A=(()=>{let i=class i{constructor(o){this.http=o,this.token=l(null),this.email=l(null),this.isLoggedIn=r(()=>!!this.token()),this.isAdmin=r(()=>this.isLoggedIn()&&this.email()===k);let t=localStorage.getItem(c),e=localStorage.getItem(m);t&&e&&(this.token.set(t),this.email.set(e)),u(()=>{let h=this.token(),p=this.email();h&&p?(localStorage.setItem(c,h),localStorage.setItem(m,p)):(localStorage.removeItem(c),localStorage.removeItem(m))})}login(o,t){return this.http.post("/api/signin",{email:o,password:t}).pipe(g(e=>{this.token.set(e.token),this.email.set(o)}),a(e=>n({error:e})))}logout(){this.token.set(null),this.email.set(null)}signUp(o,t){return this.http.post("/api/signup",{email:o,password:t}).pipe(a(e=>n({error:e})))}};i.\u0275fac=function(t){return new(t||i)(I(d))},i.\u0275prov=f({token:i,factory:i.\u0275fac,providedIn:"root"});let s=i;return s})();export{A as a};
