import{a as Y}from"./chunk-2ZYPYQTJ.js";import{a as Q,b as W,c as Z}from"./chunk-YPRHJOHJ.js";import{A as K,a as T,b as g,d as N,e as O,g as V,i as q,k as D,l as R,m as k,n as A,p as B,q as G,r as j,s as U,u as H,x as X,y as z,z as J}from"./chunk-GR4BLG6T.js";import{a as F,e as L}from"./chunk-R7BTQV4R.js";import"./chunk-ZLRDRSCN.js";import{o as x,p as P}from"./chunk-NKAKMUPO.js";import{Ab as t,Bb as n,Cb as _,Gb as b,Sb as i,Tb as w,Wb as I,Xa as o,Xb as y,Ya as f,hb as h,ka as M,ob as S,pb as v,qb as l,vb as s}from"./chunk-SQV3AFQF.js";var $=()=>["/signup"];function ee(r,a){r&1&&(t(0,"mat-error"),i(1,"Incorrect email or password"),n())}function te(r,a){r&1&&(t(0,"mat-error"),i(1,"Incorrect email"),n())}function ie(r,a){r&1&&(t(0,"mat-error"),i(1,"Email is "),t(2,"strong"),i(3,"required"),n()())}function re(r,a){r&1&&(t(0,"mat-error"),i(1,"Incorrect email or password"),n())}function ne(r,a){r&1&&(t(0,"mat-error"),i(1,"Password is "),t(2,"strong"),i(3,"required"),n()())}var oe=400,ye=(()=>{let a=class a{constructor(d,m,e){this.formBuilder=d,this.authService=m,this.router=e,this.hide=h(!0),this.isLoading=h(!1),this.form=this.formBuilder.group({email:["",[g.required,g.pattern(F)]],password:["",[g.required,Z(1)]]}),this.onSubmitMatcher=new Y}ngOnInit(){this.form.get("email")?.valueChanges.subscribe(()=>{this.form.get("password")?.hasError("incorrectCredentials")&&this.form.get("password")?.updateValueAndValidity()}),this.form.get("password")?.valueChanges.subscribe(()=>{this.form.get("email")?.hasError("incorrectCredentials")&&this.form.get("email")?.updateValueAndValidity()})}onSubmit(){if(this.form.invalid)return;let d=this.form.get("email").value,m=this.form.get("password").value;this.isLoading.set(!0),this.authService.login(d,m).subscribe(e=>{if(this.isLoading.set(!1),e.error?.status===oe){this.form.get("email")?.setErrors({incorrectCredentials:!0}),this.form.get("password")?.setErrors({incorrectCredentials:!0});return}this.router.navigate(["/"])})}};a.\u0275fac=function(m){return new(m||a)(f(R),f(L),f(x))},a.\u0275cmp=M({type:a,selectors:[["app-sign-in-page"]],standalone:!0,features:[I],decls:24,vars:15,consts:[[1,"form",3,"submit","formGroup"],["type","email","matInput","","formControlName","email","placeholder","Ex. pat@example.com",3,"errorStateMatcher"],["matInput","","formControlName","password",3,"type","errorStateMatcher"],["type","button","mat-icon-button","","matSuffix","",3,"click"],[1,"wrapper"],["type","submit","mat-flat-button","",1,"submit-button",3,"disabled"],[3,"routerLink"]],template:function(m,e){if(m&1&&(t(0,"form",0),b("submit",function(){return e.onSubmit()}),t(1,"h2"),i(2,"Sign In"),n(),t(3,"mat-form-field")(4,"mat-label"),i(5,"Email"),n(),_(6,"input",1),S(7,ee,2,0,"mat-error")(8,te,2,0,"mat-error")(9,ie,4,0,"mat-error"),n(),t(10,"mat-form-field")(11,"mat-label"),i(12,"Enter your password"),n(),_(13,"input",2),S(14,re,2,0,"mat-error")(15,ne,4,0,"mat-error"),t(16,"button",3),b("click",function(){return e.hide.set(!e.hide())}),t(17,"mat-icon"),i(18),n()()(),t(19,"div",4)(20,"button",5),i(21," Sign In "),n(),t(22,"a",6),i(23,"Sign Up"),n()()()),m&2){let u,p,C,E,c;l("formGroup",e.form),o(6),l("errorStateMatcher",e.onSubmitMatcher),o(),s((u=e.form.get("email"))!=null&&u.hasError("incorrectCredentials")?7:-1),o(),s((p=e.form.get("email"))!=null&&p.hasError("pattern")&&!((p=e.form.get("email"))!=null&&p.hasError("required"))?8:-1),o(),s((C=e.form.get("email"))!=null&&C.hasError("required")?9:-1),o(4),l("type",e.hide()?"password":"text")("errorStateMatcher",e.onSubmitMatcher),o(),s((E=e.form.get("password"))!=null&&E.hasError("incorrectCredentials")?14:-1),o(),s((c=e.form.get("password"))!=null&&c.hasError("required")||(c=e.form.get("password"))!=null&&c.hasError("minlength")?15:-1),o(),v("aria-label","Hide password")("aria-pressed",e.hide()),o(2),w(e.hide()?"visibility_off":"visibility"),o(2),l("disabled",e.form.invalid||e.isLoading()),o(2),l("routerLink",y(14,$))}},dependencies:[z,X,j,U,H,W,Q,k,V,T,N,O,q,D,G,A,B,K,J,P],styles:[".form[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:10px;margin:0 auto;max-width:400px;padding:20px}.wrapper[_ngcontent-%COMP%]{display:flex;justify-content:space-around;align-items:center;gap:15px}.wrapper[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{padding:0 10px;color:#000}.submit-button[_ngcontent-%COMP%]{flex-grow:1}"],changeDetection:0});let r=a;return r})();export{ye as SignInPageComponent};
