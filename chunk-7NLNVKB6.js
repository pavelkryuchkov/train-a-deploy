import{b as N,d as g,f as $,g as R,i as B,j,l as A,n as G,p as U,q as L,r as z,u as H}from"./chunk-A73FDB7P.js";import{a as ee}from"./chunk-PLFLKSHQ.js";import{a as Q,c as W,e as X,f as Y,g as Z,h as y}from"./chunk-57V65NWP.js";import"./chunk-Z6QEANO5.js";import{a as J,d as K}from"./chunk-4PPTANTY.js";import"./chunk-3X4PWRWX.js";import"./chunk-IP76CWZZ.js";import{b as q}from"./chunk-Y5E3HJHA.js";import{$b as c,Cb as V,Db as S,Fb as p,Gb as u,Hb as r,Ia as M,Ib as e,Jb as f,Lb as E,Ob as m,Qb as d,Rc as I,ac as w,bb as l,bc as k,cb as x,ic as _,jc as v,la as D,pa as C,vb as T,xa as h,xb as P,ya as b}from"./chunk-G6VS4OII.js";var ie=(()=>{let t=class t{constructor(a){this.dialogRef=a}onConfirm(){this.dialogRef.close(!0)}onCancel(){this.dialogRef.close(!1)}};t.\u0275fac=function(i){return new(i||t)(x(Q))},t.\u0275cmp=C({type:t,selectors:[["app-confirmation-dialog"]],standalone:!0,features:[_],decls:9,vars:0,consts:[["mat-dialog-title",""],["mat-button","",3,"click"],["mat-button","","color","warn",3,"click"]],template:function(i,s){i&1&&(r(0,"h2",0),c(1,"Confirm"),e(),r(2,"mat-dialog-content"),c(3,"Are you sure you want to delete this carriage?"),e(),r(4,"mat-dialog-actions")(5,"button",1),m("click",function(){return s.onCancel()}),c(6,"Cancel"),e(),r(7,"button",2),m("click",function(){return s.onConfirm()}),c(8,"Delete"),e()())},dependencies:[I,y,X,Z,Y,K,J],changeDetection:0});let n=t;return n})();var O=()=>[];function oe(n,t){if(n&1&&(r(0,"div",3),c(1),e()),n&2){let o=t.$index,a=d().$index,i=d();l(),k(" ",o+1+a*(i.rightSeats()+i.leftSeats())+i.leftSeats()," ")}}function ae(n,t){if(n&1&&(r(0,"div",2),p(1,oe,2,1,"div",3,S),e()),n&2){let o=d();l(),u(v(0,O).constructor(o.rightSeats()))}}function ce(n,t){if(n&1&&(r(0,"div",3),c(1),e()),n&2){let o=t.$index,a=d().$index,i=d();l(),k(" ",o+1+a*(i.rightSeats()+i.leftSeats())," ")}}function se(n,t){if(n&1&&(r(0,"div",2),p(1,ce,2,1,"div",3,S),e()),n&2){let o=d();l(),u(v(0,O).constructor(o.leftSeats()))}}var ne=(()=>{let t=class t{constructor(){this.rows=M.required(),this.rightSeats=M.required(),this.leftSeats=M.required()}};t.\u0275fac=function(i){return new(i||t)},t.\u0275cmp=C({type:t,selectors:[["app-carriage-schema"]],inputs:{rows:[1,"rows"],rightSeats:[1,"rightSeats"],leftSeats:[1,"leftSeats"]},standalone:!0,features:[_],decls:9,vars:2,consts:[[1,"carriage-schema"],[1,"seats"],[1,"row"],[1,"seat"]],template:function(i,s){i&1&&(r(0,"div",0)(1,"div",1),c(2," R "),p(3,ae,3,1,"div",2,S),e(),r(5,"div",1),c(6," L "),p(7,se,3,1,"div",2,S),e()()),i&2&&(l(3),u(v(0,O).constructor(s.rows())),l(4),u(v(1,O).constructor(s.rows())))},styles:[".carriage-schema[_ngcontent-%COMP%]{display:inline-flex;flex-direction:column;gap:32px;border:1px solid gray;border-radius:16px;margin-right:15px;padding:16px 64px 16px 48px}.carriage-schema[_ngcontent-%COMP%]   .seats[_ngcontent-%COMP%]{display:flex;gap:10px;align-items:center}.carriage-schema[_ngcontent-%COMP%]   .seats[_ngcontent-%COMP%]   .row[_ngcontent-%COMP%]{display:flex;flex-direction:column-reverse;gap:10px}.carriage-schema[_ngcontent-%COMP%]   .seats[_ngcontent-%COMP%]   .row[_ngcontent-%COMP%]   .seat[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;width:30px;height:30px;background-color:#003c7c;color:#fff;border-radius:5px}"],changeDetection:0});let n=t;return n})();var le=(n,t)=>t.code;function de(n,t){if(n&1){let o=E();r(0,"div",2)(1,"h2"),c(2),e(),r(3,"form",5),m("ngSubmit",function(){h(o);let i=d();return b(i.saveCarriage())}),r(4,"div",6)(5,"label",7),c(6,"Name"),e(),f(7,"input",8),e(),r(8,"div",6)(9,"label",9),c(10,"Rows"),e(),f(11,"input",10),e(),r(12,"div",6)(13,"label",11),c(14,"Left Seats"),e(),f(15,"input",12),e(),r(16,"div",6)(17,"label",13),c(18,"Right Seats"),e(),f(19,"input",14),e(),r(20,"button",15),c(21),e(),r(22,"button",16),m("click",function(){h(o);let i=d();return b(i.resetForm())}),c(23,"Cancel"),e()(),r(24,"div",17)(25,"h3"),c(26,"Carriage Prototype"),e(),f(27,"app-carriage-schema",18),e()()}if(n&2){let o=d();l(2),w(o.editingCarriageCode?"Update Carriage":"Create Carriage"),l(),P("formGroup",o.form),l(18),w(o.editingCarriageCode?"Update":"Save"),l(6),P("rows",o.rowsControl.value)("rightSeats",o.rightSeatsControl.value)("leftSeats",o.leftSeatsControl.value)}}function me(n,t){if(n&1){let o=E();r(0,"div",4)(1,"h3"),c(2),e(),r(3,"div")(4,"button",19),m("click",function(){let i=h(o).$implicit,s=d();return b(s.editCarriage(i))}),c(5,"Update"),e(),r(6,"button",20),m("click",function(){let i=h(o).$implicit,s=d();return b(s.deleteCarriage(i))}),c(7,"Delete"),e()(),f(8,"app-carriage-schema",18),e()}if(n&2){let o=t.$implicit;l(2),w(o.name),l(6),P("rows",o.rows)("rightSeats",o.rightSeats)("leftSeats",o.leftSeats)}}var De=(()=>{let t=class t{constructor(a,i,s){this.fb=a,this.http=i,this.dialog=s,this.carriagesService=D(ee),this.form=this.fb.nonNullable.group({name:["",[g.required]],rows:[2,[g.required,g.min(2)]],leftSeats:[2,[g.required,g.min(1)]],rightSeats:[3,[g.required,g.min(1)]]}),this.isEditMode=!1,this.editingCarriageCode=null}ngOnInit(){this.loadCarriages()}loadCarriages(){this.carriagesService.getCarriages().subscribe()}createCarriage(){this.isEditMode=!0,this.editingCarriageCode=null,this.form.reset({rows:2,leftSeats:10,rightSeats:10})}editCarriage(a){this.isEditMode=!0,this.editingCarriageCode=a.code,this.form.patchValue(a)}saveCarriage(){if(this.form.invalid)return;let a=this.form.value;if(this.editingCarriageCode){this.carriagesService.updateCarriage(this.editingCarriageCode,a).subscribe(()=>{this.resetForm()});return}this.carriagesService.createCarriage(a).subscribe(()=>{this.resetForm()})}resetForm(){this.isEditMode=!1,this.form.reset()}deleteCarriage(a){this.dialog.open(ie).afterClosed().subscribe(s=>{s&&this.carriagesService.deleteCarriage(a.code).subscribe()})}get nameControl(){return this.form.controls.name}get rowsControl(){return this.form.controls.rows}get rightSeatsControl(){return this.form.controls.rightSeats}get leftSeatsControl(){return this.form.controls.leftSeats}};t.\u0275fac=function(i){return new(i||t)(x(z),x(q),x(W))},t.\u0275cmp=C({type:t,selectors:[["app-carriages-page"]],standalone:!0,features:[_],decls:7,vars:1,consts:[[1,"container"],[1,"create-button",3,"click"],[1,"form-container"],[1,"carriage-list"],[1,"carriage-item"],[3,"ngSubmit","formGroup"],[1,"form-group"],["for","name"],["id","name","formControlName","name","type","text","required",""],["for","rows"],["id","rows","formControlName","rows","type","number","min","1","required",""],["for","leftSeats"],["id","leftSeats","formControlName","leftSeats","type","number","min","0","required",""],["for","rightSeats"],["id","rightSeats","formControlName","rightSeats","type","number","min","0","required",""],["type","submit",1,"submit-button"],["type","button",1,"cancel-button",3,"click"],[1,"prototype"],[3,"rows","rightSeats","leftSeats"],[1,"update-button",3,"click"],[1,"delete-button",3,"click"]],template:function(i,s){i&1&&(r(0,"div",0)(1,"button",1),m("click",function(){return s.createCarriage()}),c(2,"Create Carriage"),e(),T(3,de,28,6,"div",2),r(4,"div",3),p(5,me,9,4,"div",4,le),e()()),i&2&&(l(3),V(s.isEditMode?3:-1),l(2),u(s.carriagesService.carriages()))},dependencies:[H,B,N,j,$,R,L,U,A,G,y,ne],styles:[".container[_ngcontent-%COMP%]{max-width:800px;margin:0 auto;padding:20px}.create-button[_ngcontent-%COMP%], .submit-button[_ngcontent-%COMP%], .cancel-button[_ngcontent-%COMP%], .update-button[_ngcontent-%COMP%], .delete-button[_ngcontent-%COMP%]{margin-left:5px;margin-bottom:20px;padding:10px 15px;border:none;border-radius:5px;cursor:pointer}.create-button[_ngcontent-%COMP%], .submit-button[_ngcontent-%COMP%], .update-button[_ngcontent-%COMP%]{background-color:#007bff;color:#fff}.create-button[_ngcontent-%COMP%]:hover, .submit-button[_ngcontent-%COMP%]:hover, .update-button[_ngcontent-%COMP%]:hover{background-color:#0056b3}.cancel-button[_ngcontent-%COMP%], .delete-button[_ngcontent-%COMP%]{background-color:#dc3545;color:#fff}.cancel-button[_ngcontent-%COMP%]:hover, .delete-button[_ngcontent-%COMP%]:hover{background-color:#c82333}.form-container[_ngcontent-%COMP%]{background-color:#f9f9f9;padding:20px;border:1px solid #ddd;border-radius:10px;margin-bottom:20px}.form-group[_ngcontent-%COMP%]{margin-bottom:15px}.form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:block;margin-bottom:5px}.form-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{box-sizing:border-box;width:100%;padding:10px;border:1px solid #ccc;border-radius:5px}.prototype[_ngcontent-%COMP%]{margin-top:10px;overflow-x:auto}.carriage-list[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:20px;margin-top:20px}.carriage-item[_ngcontent-%COMP%]{overflow-x:auto;padding:15px;border:1px solid #ccc;border-radius:10px}"],changeDetection:0});let n=t;return n})();export{De as CarriagesPageComponent};
